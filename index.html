<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>大凉语系雅言输入法</title>
  <style>
    body { background: #0b0c2a; color: #fff; font-family: "Microsoft YaHei"; text-align: center; margin: 0; padding: 20px; }
    #keyboard { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
    .key { background: #f0c000; color: #000; border: none; border-radius: 8px; padding: 12px; margin: 6px; font-size: 18px; cursor: pointer; box-shadow: 0 0 8px #f0c00066; transition: transform 0.1s ease; }
    .key:hover { transform: scale(1.05); }
    #inputBox { margin-top: 20px; padding: 10px; width: 90%; font-size: 16px; border-radius: 8px; border: none; }
    #outputCanvas { background: #111; margin-top: 20px; border: 1px solid #f0c000; border-radius: 6px; }
    #upperCaseBtn, #deleteBtn { background: #007bff; color: white; padding: 10px 20px; margin-top: 20px; border-radius: 8px; cursor: pointer; }
    #deleteBtn { background: #dc3545; }
  </style>
</head>
<body>
  <h2>🌠 大凉语系雅言输入法</h2>
  <input type="text" id="inputBox" placeholder="输入拉丁字母..." readonly />
  <div id="keyboard">
    <button class="key" onclick="handleKeyClick('a')">A</button>
    <button class="key" onclick="handleKeyClick('b')">B</button>
    <button class="key" onclick="handleKeyClick('c')">C</button>
    <button class="key" onclick="handleKeyClick('d')">D</button>
    <button class="key" onclick="handleKeyClick('e')">E</button>
    <button class="key" onclick="handleKeyClick('f')">F</button>
    <button class="key" onclick="handleKeyClick('g')">G</button>
    <button class="key" onclick="handleKeyClick('h')">H</button>
    <button class="key" onclick="handleKeyClick('i')">I</button>
    <button class="key" onclick="handleKeyClick('j')">J</button>
    <button class="key" onclick="handleKeyClick('k')">K</button>
    <button class="key" onclick="handleKeyClick('l')">L</button>
    <button class="key" onclick="handleKeyClick('m')">M</button>
    <button class="key" onclick="handleKeyClick('n')">N</button>
    <button class="key" onclick="handleKeyClick('o')">O</button>
    <button class="key" onclick="handleKeyClick('p')">P</button>
    <button class="key" onclick="handleKeyClick('q')">Q</button>
    <button class="key" onclick="handleKeyClick('r')">R</button>
    <button class="key" onclick="handleKeyClick('s')">S</button>
    <button class="key" onclick="handleKeyClick('t')">T</button>
    <button class="key" onclick="handleKeyClick('u')">U</button>
    <button class="key" onclick="handleKeyClick('v')">V</button>
    <button class="key" onclick="handleKeyClick('w')">W</button>
    <button class="key" onclick="handleKeyClick('x')">X</button>
    <button class="key" onclick="handleKeyClick('y')">Y</button>
    <button class="key" onclick="handleKeyClick('z')">Z</button>
  </div>
  <button id="upperCaseBtn" onclick="toggleCase()">切换大小写</button>
  <button id="deleteBtn" onclick="deleteCharacter()">删除</button>

  <canvas id="outputCanvas" width="300" height="300"></canvas>

  <script src="render.js"></script>
  <script>
    let isUpperCase = false;
    let currentInput = '';

    // 按键点击处理
    function handleKeyClick(letter) {
      if (isUpperCase) {
        letter = letter.toUpperCase();
      }
      currentInput += letter;
      document.getElementById('inputBox').value = currentInput;
      renderCharacter(currentInput);
    }

    // 切换大小写
    function toggleCase() {
      isUpperCase = !isUpperCase;
    }

    // 删除字符
    function deleteCharacter() {
      currentInput = currentInput.slice(0, -1);
      document.getElementById('inputBox').value = currentInput;
      renderCharacter(currentInput);
    }

    // 渲染字符函数
    function renderCharacter(input) {
      const canvas = document.getElementById('outputCanvas');
      const ctx = canvas.getContext('2d');
      const charData = getCharData(input);

      renderChar(charData, canvas.width, canvas.height, ctx);
    }

    // 获取字符渲染数据（这里可以根据input字符从JSON中获取渲染信息）
    function getCharData(input) {
      // 示例：返回一个简单的笔画数据，实际情况应从存储的字符数据中获取
      if (input === 'a') {
        return [{ x: 10, y: 10 }, { x: 50, y: 50 }, { x: 100, y: 100 }]; // 伪数据
      }
      // 添加更多字符对应的数据
      return [];
    }
  </script>
</body>
</html>
